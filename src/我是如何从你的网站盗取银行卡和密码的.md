# 我是如何从你的网站盗取银行卡和密码的
> 译者：本文翻译自[hackermoon上的文章](https://hackernoon.com/im-harvesting-credit-card-numbers-and-passwords-from-your-site-here-s-how-9a8cb347c5b5)，希望本文能唤起广大前端工作者的安全意识，以下为正文:

*** 

> 以下是一个真实的故事。或者它可能只是基于一个真实的故事。也许这根本不是真的。

这是一个疯狂的安全恐慌周——似乎每天都有一个新的漏洞。当家里人询问我相关的事情时，我需要假装我很懂行，这真的让我感到很煎熬。

看到与我亲近的人都在忧虑“被盗窃”，这确实让我有所感触。

所以，我怀着沉重的心情，决定干净利落地告诉你，我过去几年是如何偷你的网站上的用户名，密码和信用卡号码。

***

恶意代码本身非常简单，当它在满足以下条件的页面上运行时，它就能发挥作用：

* 该页面有一个\<form>标签
* 一个input[type="password"]元素，或者name属性为"cardnumber"或"cvc"的元素等
* 该页面包含“信用卡”，“结账”，“登录”，“密码”等字样。

然后，当密码/信用卡字段上出现"blur"事件或form标签上监听到"submit"事件时，我的代码：

* 获取页面上的所有表单字段（document.forms.forEach(…)）
* 获取document.cookie
* 将这些信息变成随机的字符串：
```jsx
 const payload = btoa(JSON.stringify(sensitiveUserData))
```
* 然后将其发送到`https://legit-analytics.com?q=${payload}`（当然这不是真正的域名）

简而言之，只要是看起来对我有价值的数据，我就会把它发送到我的服务器。

***

2015年时，当我第一次编写这段代码时，它毫无用处，只能躲在我电脑里。我需要把它散布到这个世界，进入你的网站。

用Google的一句话：如果攻击者成功注入了任何代码，那么游戏结束了！

XSS规模太小，而且已经被针对保护得很好了。

Chrome扩展程序也是被限制死的。

幸运的是，我们生活在一个人人都使用npm的时代，就像他们磕止痛药一样。

*** 

所以，npm是我的散布方法。我需要创造一些有用的开源软件，让人们不假思索地安装——我的特洛伊木马。

人们喜欢漂亮的颜色 - 这是我们与狗之间的区别 - 所以我写了一个包，让你以任何颜色登录控制台。

![]()